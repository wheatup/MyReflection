if(!wh)var wh={};wh._TweenChain=function(t){this.target=t,this.curIndex=-1,this.args=[],this.settings=[],this.durations=[],this.adds=[],this.hasRunned=!1,this.stopped=!1,this.loops=[],this.addIndex=0,this.lastLoopIndex=0,this.curLoopIndex=0,this.to=function(t,s,e,i){return this.args.push(t),this.durations.push(isNaN(s)||s<1?1:s),this.settings.push(e?{ease:e}:{ease:wh.Easing.Linear}),this.adds.push(i||{}),wh.Tween._inited,this.addIndex++,this},this.wait=function(t){return this.args.push({}),this.durations.push(isNaN(t)||t<1?1:t),this.settings.push({}),this.adds.push({}),this.addIndex++,this},this.call=function(t,s,e){return this.args.push({}),this.durations.push(0),this.settings.push({func:t,data:s,caller:e}),this.adds.push({}),this.addIndex++,this},this.loop=function(t){return this.loops.push({from:this.lastLoopIndex,to:this.addIndex,count:t}),this.lastLoopIndex=this.addIndex,this},this._run=function(){this.hasRunned||(this.hasRunned=!0,this._activate())},this._stop=function(){this.stopped=!0},this.passingTime=0,this.speed=0,this.attrArr=[],this.curArr=[],this.initArr=[],this.attrs=[],this.sets=[],this.addss=[],this.curEase=null,this.ifstop=!1,this.update=function(t){if(!this.stopped&&this.target){for(var s in this.passingTime+=t,this.passingTime=Math.min(this.passingTime,this.speed),this.passingTime=Math.min(this.passingTime,this.speed),this.attrs)for(var e=0;e<this.attrArr.length;e++){var i=this.curEase(this.passingTime,this.initArr[e],this.curArr[e]-this.initArr[e],this.speed);this.addss&&this.addss.string?this.addss.int?this.target[this.attrArr[e]]=parseFloat(i).toFixed(0):this.target[this.attrArr[e]]=parseFloat(i):this.addss&&this.addss.int?this.target[this.attrArr[e]]=parseInt(i):this.target[this.attrArr[e]]=parseFloat(i)}this.passingTime>=this.speed&&(this.ifstop||(this.ifstop=!0,this._activate()))}},this._activate=function(){if(!this.stopped&&this.target){this.curIndex++;var t=this.args.length;if(this.curLoopIndex<this.loops.length&&(t=this.loops[this.curLoopIndex].to),0!=this.curLoopIndex&&this.curLoopIndex>=this.loops.length)wh.Tween._removeTween(this);else if(this.curIndex>=t&&this.loops[this.curLoopIndex]&&(this.loops[this.curLoopIndex].count--,0!=this.loops[this.curLoopIndex].count?this.curIndex=this.loops[this.curLoopIndex].from:this.curLoopIndex++),this.curIndex>=this.args.length)wh.Tween._removeTween(this);else{for(var s in this.attrArr=[],this.curArr=[],this.initArr=[],this.attrs=this.args[this.curIndex],this.sets=this.settings[this.curIndex],this.addss=this.adds[this.curIndex],this.speed=this.durations[this.curIndex],this.ifstop=!1,this.curEase=this.sets.ease?this.sets.ease:wh.Easing.Linear,this.passingTime=0,this.attrs){this.attrArr.push(s),this.curArr.push(this.attrs[s]);var e=parseFloat(this.target[s]);isNaN(e)&&(e=0),this.initArr.push(e)}var i=!1;for(var n in this.attrs){i=!0;break}i||this.sets.func&&(this.sets.caller?this.sets.func.call(this.sets.caller,this.sets.data):this.sets.func(this.sets.data))}}}},wh.Tween={_targets:[],_tweens:[],_inited:!1,_timer:null,_game:null,get:function(t){!this._inited&&t.game&&(this._inited=!0,this._game=t.game,this._timer=this._game.timer.loop(0,function(){this._update(this._game.time.deltaTime)},this)),t._tweenChain||(t._tweenChain=[]);var s=new wh._TweenChain(t);return t._tweenChain.push(s),this._tweens.push(s),this._targets.push(t),s},init:function(t){!this._inited&&t&&(this._inited=!0,this._game=t,this._timer=this._game.timer.loop(0,function(){this._update(this._game.time.deltaTime)},this))},_update:function(t){for(var s=0;s<wh.Tween._tweens.length;s++)wh.Tween._tweens[s].update(t)},_removeTween:function(t){var s=wh.Tween._tweens.indexOf(t);0<=s&&wh.Tween._tweens.splice(s,1),t.target&&t.target._tweenChain&&(0<=(s=t.target._tweenChain.indexOf(t))&&t.target._tweenChain.splice(s,1),t.target._tweenChain.length<=0&&this.remove(t.target))},remove:function(t){if(t._tweenChain){for(var s=0;s<t._tweenChain.length;s++){t._tweenChain[s]._stop();var e=wh.Tween._tweens.indexOf(t._tweenChain[s]);0<=e&&wh.Tween._tweens.splice(e,1)}t._tweenChain=[]}},removeAll:function(){for(var t=0;t<this._targets.length;t++)this.remove(this._targets[t]);wh.Tween.tweens=[]},stop:function(){this._timer&&(this._game.timer.remove(this._timer),this._inited=!1)}},wh.Easing={Linear:function(t,s,e,i){return e*t/i+s},Quad:{easeIn:function(t,s,e,i){return e*(t/=i)*t+s},easeOut:function(t,s,e,i){return-e*(t/=i)*(t-2)+s},easeInOut:function(t,s,e,i){return(t/=i/2)<1?e/2*t*t+s:-e/2*(--t*(t-2)-1)+s}},Cubic:{easeIn:function(t,s,e,i){return e*(t/=i)*t*t+s},easeOut:function(t,s,e,i){return e*((t=t/i-1)*t*t+1)+s},easeInOut:function(t,s,e,i){return(t/=i/2)<1?e/2*t*t*t+s:e/2*((t-=2)*t*t+2)+s}},Quart:{easeIn:function(t,s,e,i){return e*(t/=i)*t*t*t+s},easeOut:function(t,s,e,i){return-e*((t=t/i-1)*t*t*t-1)+s},easeInOut:function(t,s,e,i){return(t/=i/2)<1?e/2*t*t*t*t+s:-e/2*((t-=2)*t*t*t-2)+s}},Quint:{easeIn:function(t,s,e,i){return e*(t/=i)*t*t*t*t+s},easeOut:function(t,s,e,i){return e*((t=t/i-1)*t*t*t*t+1)+s},easeInOut:function(t,s,e,i){return(t/=i/2)<1?e/2*t*t*t*t*t+s:e/2*((t-=2)*t*t*t*t+2)+s}},Sine:{easeIn:function(t,s,e,i){return-e*Math.cos(t/i*(Math.PI/2))+e+s},easeOut:function(t,s,e,i){return e*Math.sin(t/i*(Math.PI/2))+s},easeInOut:function(t,s,e,i){return-e/2*(Math.cos(Math.PI*t/i)-1)+s}},Expo:{easeIn:function(t,s,e,i){return 0==t?s:e*Math.pow(2,10*(t/i-1))+s},easeOut:function(t,s,e,i){return t==i?s+e:e*(1-Math.pow(2,-10*t/i))+s},easeInOut:function(t,s,e,i){return 0==t?s:t==i?s+e:(t/=i/2)<1?e/2*Math.pow(2,10*(t-1))+s:e/2*(2-Math.pow(2,-10*--t))+s}},Circ:{easeIn:function(t,s,e,i){return-e*(Math.sqrt(1-(t/=i)*t)-1)+s},easeOut:function(t,s,e,i){return e*Math.sqrt(1-(t=t/i-1)*t)+s},easeInOut:function(t,s,e,i){return(t/=i/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+s:e/2*(Math.sqrt(1-(t-=2)*t)+1)+s}},Elastic:{easeIn:function(t,s,e,i,n,h){if(0==t)return s;if(1==(t/=i))return s+e;if(h||(h=.3*i),!n||n<Math.abs(e)){n=e;var a=h/4}else a=h/(2*Math.PI)*Math.asin(e/n);return-n*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/h)+s},easeOut:function(t,s,e,i,n,h){if(0==t)return s;if(1==(t/=i))return s+e;if(h||(h=.3*i),!n||n<Math.abs(e)){n=e;var a=h/4}else a=h/(2*Math.PI)*Math.asin(e/n);return n*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/h)+e+s},easeInOut:function(t,s,e,i,n,h){if(0==t)return s;if(2==(t/=i/2))return s+e;if(h||(h=i*(.3*1.5)),!n||n<Math.abs(e)){n=e;var a=h/4}else a=h/(2*Math.PI)*Math.asin(e/n);return t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/h)*-.5+s:n*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/h)*.5+e+s}},Back:{easeIn:function(t,s,e,i,n){return null==n&&(n=1.70158),e*(t/=i)*t*((n+1)*t-n)+s},easeOut:function(t,s,e,i,n){return null==n&&(n=1.70158),e*((t=t/i-1)*t*((n+1)*t+n)+1)+s},easeInOut:function(t,s,e,i,n){return null==n&&(n=1.70158),(t/=i/2)<1?e/2*(t*t*((1+(n*=1.525))*t-n))+s:e/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+s}},Bounce:{easeIn:function(t,s,e,i){return e-Easing.Bounce.easeOut(i-t,0,e,i)+s},easeOut:function(t,s,e,i){return(t/=i)<1/2.75?e*(7.5625*t*t)+s:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+s:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+s:e*(7.5625*(t-=2.625/2.75)*t+.984375)+s},easeInOut:function(t,s,e,i){return t<i/2?.5*Easing.Bounce.easeIn(2*t,0,e,i)+s:.5*Easing.Bounce.easeOut(2*t-i,0,e,i)+.5*e+s}}};
//# sourceMappingURL=whTween.js.map
